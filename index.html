<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width">
<meta charset="utf-8">
<title>STALKERS SHOP</title>
<meta name="title" content="STALKERS SHOP - The #1 6g6s Shop">
<meta name="description" content="STALKERS SHOP has been the #1 shop on 6g6s.org Buy the highest quality kits and items on 6g6s.org for the cheapest prices!">
<meta property="og:type" content="website">
<meta property="og:title" content="STALKERS SHOP - The #1 6g6s Shop">
<meta property="og:description" content="STALKERS SHOP has been the #1 shop on 6g6s.org Buy the highest quality kits and items on 6g6s.org for the cheapest prices!">
<meta property="og:image" content="images/bariga.jpg">
<meta property="twitter:card" content="summary_large_image">
<script>
window.stalkerTips = [
	"Ну проветришься, заходи",
	"Ты бы еще консервных банок насобирал",
	"Короче, Меченый, я тебя спас и в благородство играть не буду",
	"Иди своей дорогой сталкер",
	"А нууу чики брики и в дамки",
	"Обходи эту шелупонь",
	"Да Да?",
	"Ну! чтоб руки не дрожали!",
	"Как говорится, добро пожаловать на борт нашего болотного ледокола",
	"Ну показывай чем зона наградила",
	"Ай, молодец!, ай обманул Ашота! Будет Ашот с тобой теперь внимательнее",
	"ША! КИПИШ ПОШЕЛ!",
	"Благодарим Тебя за то, что раскрыл слугам Твоим козни врагов наших! \n Озари сиянием Твоим души тех, кто отдал жизнь во исполнение воли Твоей! \n В бой, защитники Монолита! В бой! \n Отомстим за павших братьев наших, да будет благословенно вечное их единение с Монолитом! \n Смерть… лютая смерть тем, кто отвергает Его священную силу!..",
	"Не учатся ничему некоторые и учиться не хотят",
	"ЗА МОНОЛИТ!",
	"Держите меня семеро!",
	"А колбасу и батоны нынче хреновыми делать стали",
	"Сталкер, моя информация может быть полезной для тебя"
];
window.currentTip = window.stalkerTips[Math.floor(Math.random() * window.stalkerTips.length)];
</script>
<link rel="icon" href="./images/favicon.ico">
<link rel="stylesheet" href="css/posible_style.css" />
<script src="js/cursor.js"></script>
<script src="js/cart.js"></script>

<style>
#loading-screen {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: radial-gradient(circle, #1a1a1a 0%, #000000 100%);
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
	z-index: 9999;
	transition: opacity 0.5s ease-out;
}

#loading-screen.fade-out {
	opacity: 0;
	pointer-events: none;
}

.stalker-loader {
	position: relative;
	width: 120px;
	height: 120px;
	margin-bottom: 40px;
}

.stalker-loader::before {
	content: '';
	position: absolute;
	top: 50%;
	left: 50%;
	width: 80px;
	height: 80px;
	margin: -40px 0 0 -40px;
	border: 4px solid transparent;
	border-top-color: #ff8800;
	border-radius: 50%;
	animation: spin 1s linear infinite;
}

.stalker-loader::after {
	content: '';
	position: absolute;
	top: 50%;
	left: 50%;
	width: 60px;
	height: 60px;
	margin: -30px 0 0 -30px;
	border: 4px solid transparent;
	border-bottom-color: #ffaa00;
	border-radius: 50%;
	animation: spin 0.7s linear infinite reverse;
}

.stalker-icon {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	font-size: 48px;
	color: #ff8800;
	animation: pulse 2s ease-in-out infinite;
}

.loading-tip {
	max-width: 600px;
	padding: 20px 40px;
	text-align: center;
	color: #ffaa00;
	font-size: 18px;
	font-family: 'Courier New', monospace;
	text-shadow: 0 0 10px rgba(255, 136, 0, 0.5);
	line-height: 1.6;
	border: 2px solid #ff8800;
	background: rgba(0, 0, 0, 0.7);
	box-shadow: 0 0 20px rgba(255, 136, 0, 0.3);
}

.loading-tip-label {
	color: #fff;
	font-size: 14px;
	text-transform: uppercase;
	letter-spacing: 2px;
	margin-bottom: 10px;
	opacity: 0.8;
}

@keyframes spin {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

@keyframes pulse {
	0%, 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
	50% { opacity: 0.6; transform: translate(-50%, -50%) scale(0.9); }
}

#best-offers-container {
	display: grid !important;
	grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
	gap: 16px !important;
	justify-items: center !important;
	width: 100% !important;
}

#all-products-container, #trending-container{
	display: grid !important;
	grid-template-columns: repeat(3, 1fr) !important;
	gap: 16px !important;
	width: 100% !important;
	max-width: 100% !important;
}

.product-card {
	width: 100% !important;
	padding: 12px !important;
	display: flex !important;
	flex-direction: column !important;
}

@media (max-width: 1200px) {
	#all-products-container, #trending-container {
		grid-template-columns: repeat(2, 1fr) !important;
	}
}

@media (max-width: 768px) {
	#all-products-container, #trending-container {
		grid-template-columns: repeat(1, 1fr) !important;
	}
	
	#best-offers-container {
		grid-template-columns: 1fr !important;
	}
}
</style>

</head>
<body>
<!-- Loading Screen -->
<div id="loading-screen">
	<div class="stalker-loader">
		<div class="stalker-icon">☢</div>
	</div>
	<div class="loading-tip">
		<div class="loading-tip-label">Совет от сталкера</div>
		<div id="loading-tip-text"></div>
	</div>
</div>
<script>
	document.getElementById('loading-tip-text').textContent = window.currentTip;
</script>

<div id="__next" style="background-image:URL(images/fon.jpg);">
	<div style="position:fixed;top:50px;right:50px;z-index:1">
		<div style="width:50px;height:50px;position:relative">
			<a aria-label="Cart" href="/cart.html">
				<svg stroke="white" fill="currentColor" stroke-width="10" viewBox="0 0 576 512" style="margin:10px" height="28px" width="28px" xmlns="http://www.w3.org/2000/svg">
					<path d="M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"></path>
				</svg>
			</a>
			<div data-cart-count style="position:absolute;top:-5px;right:5px;background:red;color:white;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:bold;display:none">0</div>
		</div>
	</div>
	
	<!-- меню -->
	<nav>
		<div style="display:flex;justify-content:center">
			<div style="display:block;margin:50px auto;text-align:center;justify-content:center">
				<div style="display:flex;justify-content:center;max-width:50vw;margin:0 auto">
					<a aria-label="Home" href="#">
						<img src="images/logo.png" alt="logo" width="800">
					</a>
				</div><hr>
				<div style="place-content:center;display:flex;flex-wrap:wrap;padding-top:16px">
					<a aria-label="Home" href="#">
						<p class="menubotton active">Home</p>
					</a><a aria-label="All categories" href="categories.html">
						<p class="menubotton">Categories</p>
					</a><a aria-label="Reviews" href="reviews.html">
						<p class="menubotton">Reviews</p>
					</a><a aria-label="discord" href="https://discord.gg/6g6s-org-793077035810816031">
						<p class="menubotton">Our Discord</p>
					</a><a aria-label="6g6s.Group" target="_blank" href="https://discord.gg/6g6s-org-793077035810816031">
						<p class="menubotton">6g6s Group</p>
					</a>
				</div>
			</div>
		</div>
	</nav>
	<!-- Основная часть -->
	<div style="display:flex;justify-content:center;padding-left:16px;padding-right:16px;padding-bottom:32px">
		<main style="width:100%;max-width:1440px">
			<div>	
				<div id="hero-container" role="alert" style="margin-bottom:20px"></div>
				<div id="best-offers-container" style="margin-top:32px;"></div>
				<h2 style="font-size:36px;text-align:center;margin-top:60px;margin-bottom:32px;color:#fff;">Trending Now</h2>
				<div id="trending-container"></div>
				<div style="padding-top:128px;padding-bottom:32px">
					<h1 style="font-weight:300;font-size:48px;font-family:Eina Light;line-height:1;text-align:center;color:#fff;">All categories</h1>
				</div>
				<div id="all-products-container"></div>
			</main>
		</div>		
	</div>
<script>
async function fetchKits() {
	const res = await fetch('/api/kits');
	if (!res.ok) throw new Error('HTTP ' + res.status);
	const items = await res.json();
	if (!Array.isArray(items)) throw new Error('Invalid JSON');
	// Добавляем ID если его нет
	return items.map((item, index) => ({
		...item,
		id: item.id || index
	}));
}

function renderTrending(items) {
	var container = document.getElementById('trending-container');
	if (!container) return;
	
	var trending = items.filter(function(i){ return i.type === 'trending_now'; });
	if (trending.length === 0) {
		container.innerHTML = '<p style="color:#fff">No trending items</p>';
		return;
	}

				container.innerHTML = trending.map(function(item){
			var imgSrc = (item.photo && typeof item.photo === 'string') ? item.photo : 'images/test2.png';
			var name = item.name || 'Item';
			var quantity = item.quantity + ' left' || 'Sold out';
			var price = (item.price != null ? item.price : '');
			return (
				'<a class="darkHover product-card" href="product.html?id=' + item.id + '">' +
					'<div style="display:flex;flex-direction:column;justify-content:center;align-items:center;height:160px">' +
						'<img loading="lazy" src="' + imgSrc + '" alt="' + name + '" style="box-shadow:0 2px 7px rgb(0 0 0 / 100%);border-radius:5px;width:60%">' +
					'</div>' +
					'<div style="text-align:center">' +
						'<p style="font-size:20px;font-weight:600;font-family:Eina SemiBold;margin-bottom:4px">' + name + '</p>' +
						'<p style="font-size:18px;font-weight:600;font-family:Eina SemiBold;margin-bottom:4px;color:#374151">' + quantity + '</p>' +
						'<p class="price">' + price + '₽</p>' +
					'</div>' +
				'</a>'
			);
		}).join('');
}

function renderHero(items) {
	var hero = document.getElementById('hero-container');
	if (!hero) return;
	var onSale = items.find(function(i){ return i.type === 'on_sale'; });
	if (!onSale) { hero.innerHTML = ''; return; }
	var imgSrc = (onSale.photo && typeof onSale.photo === 'string') ? onSale.photo : 'images/elytra.png';
	var price = (onSale.price != null ? onSale.price : '');
	hero.innerHTML = (
		'<a href="product.html?id=' + onSale.id + '" style="width:100%;text-decoration:none;color:inherit">' +
		'<div class="onsalediv">' +
			'<div style="margin-bottom:20px;padding:48px 0px 0px 48px">' +
				'<p style="border-left:1px solid #000;padding-left:10px;font-size:14px;margin-bottom:28px">KITS</p>' +
				'<div>' +
					'<p style="font-size:48px;font-weight:700;line-height:1;letter-spacing:4px;text-shadow:#ffffff 2px 0 30px;">' + (onSale.name || 'On Sale') + '</p>' +
					'<p class="onsale">ON SALE!</p>' +
					'<p class="price" style="text-shadow:#ffffff 2px 0 30px;">' + price + '₽</p>' +
					'<button class="hoverBlack"><div>Shop Now</div></button>' +
				'</div>' +
			'</div>' +
			'<div style="display:flex;flex:1 1 0%;justify-content:center;position:relative;align-items:center;min-width:200px;max-width:85%;margin:0 auto">' +
				'<div style="z-index:10">' +
					'<img loading="lazy" src="' + imgSrc + '" alt="Showcase item" class="onsaleimg">' +
				'</div>' +
			'</div>' +
		'</div>' +
		'</a>'
	);
}

function renderBestOffers(items) {
	var cont = document.getElementById('best-offers-container');
	if (!cont) return;
	var best = items.filter(function(i){ return i.type === 'best_offer'; });
	if (best.length === 0) { cont.innerHTML = ''; return; }
	cont.innerHTML = best.map(function(item){
		var imgSrc = (item.photo && typeof item.photo === 'string') ? item.photo : 'images/test2.png';
		var name = item.name || 'Item';
		var price = (item.price != null ? item.price : '');
		var quantity = item.quantity + ' left' || 'Sold out';
		return (
			'<div class="darkHover product-card">' +
				'<a href="product.html?id=' + item.id + '" style="display:flex;flex-direction:column;height:100%;text-decoration:none;color:inherit">' +
					'<div style="display:flex;flex-direction:column;justify-content:center;align-items:center;height:224px;flex-grow:1">' +
						'<img loading="lazy" src="' + imgSrc + '" alt="' + name + '" style="box-shadow:0 2px 7px rgb(0 0 0 / 100%);border-radius:5px;width:75%;max-width:400px">' +
					'</div>' +
					'<div style="margin-bottom:32px">' +
						'<p style="font-size:28px;font-weight:600;font-family:Eina SemiBold">' + name + '</p>' +
						'<p class="price">' + price + '₽</p>' +
						'<p style="font-size:24px;font-weight:600;font-family:Eina SemiBold;color:#374151">' + quantity + '</p>' +
					'</div>' +
				'</a>' +
			'</div>'
		);
	}).join('');
}

function renderAllProducts(items) {
	var cont = document.getElementById('all-products-container');
	if (!cont) return;
	
	var filtered = items.filter(function(i) { 
		return i.type !== 'on_sale' && i.type !== 'best_offer' && i.type !== 'trending_now'; 
	});
	
	if (filtered.length === 0) { cont.innerHTML = ''; return; }
	cont.innerHTML = filtered.map(function(item){
		var imgSrc = (item.photo && typeof item.photo === 'string') ? item.photo : 'images/test2.png';
		var name = item.name || 'Item';
		var price = (item.price != null ? item.price : '');
		var quantity = item.quantity + ' left' || 'Sold out';
		return (
			'<div class="darkHover product-card">' +
				'<a href="product.html?id=' + item.id + '" style="display:flex;flex-direction:column;height:100%;text-decoration:none;color:inherit">' +
					'<div style="display:flex;flex-direction:column;justify-content:center;align-items:center;height:224px;padding:32px;flex-grow:1">' +
						'<img loading="lazy" src="' + imgSrc + '" alt="' + name + '" style="box-shadow:0 2px 7px rgb(0 0 0 / 100%);border-radius:5px;width:75%;max-width:400px">' +
					'</div>' +
					'<div style="margin-bottom:32px">' +
						'<p style="font-size:28px;font-weight:600;font-family:Eina SemiBold">' + name + '</p>' +
						'<p style="font-size:24px;font-weight:600;font-family:Eina SemiBold;margin-bottom:4px;color:#374151">' + quantity + '</p>' +
						'<p class="price">' + price + '₽</p>' +
					'</div>' +
				'</a>' +
			'</div>'
		);
	}).join('');
}

// Hide loading screen when page is fully loaded
var loadingScreenHidden = false;

function hideLoadingScreen() {
	if (loadingScreenHidden) return;
	loadingScreenHidden = true;
	
	var loadingScreen = document.getElementById('loading-screen');
	if (loadingScreen) {
		loadingScreen.classList.add('fade-out');
		setTimeout(function() {
			loadingScreen.style.display = 'none';
		}, 500);
	}
}

var maxLoadingTime = setTimeout(function() {
	console.warn('Loading screen timeout - forcing hide');
	hideLoadingScreen();
}, 30000);

window.addEventListener('beforeunload', function() {
	clearTimeout(maxLoadingTime);
});

async function renderAllSections() {
	try {
		const items = await fetchKits();
		renderHero(items);
		renderBestOffers(items);
		renderTrending(items);
		renderAllProducts(items);
		
		clearTimeout(maxLoadingTime);
		hideLoadingScreen();
	} catch (e) {
		console.error('Failed to load items', e);
		var tc = document.getElementById('trending-container'); 
		if (tc) tc.innerHTML = '<p style="color:#fff">Failed to load items</p>';
		
		clearTimeout(maxLoadingTime);
		hideLoadingScreen();
	}
}

if (document.readyState === 'loading') {
	document.addEventListener('DOMContentLoaded', renderAllSections);
} else {
	renderAllSections();
}
</script>
</div>
</body>
</html>